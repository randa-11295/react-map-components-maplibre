"use strict";(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[852],{29975:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>b,__namedExportsOrder:()=>v,default:()=>y});var n=r(67294),o=r(31072),a=function(t){var e=(0,o.Z)({mapId:void 0}),r=(0,n.useRef)(!1);(0,n.useEffect)((function(){var n;e.map&&!r.current&&(null===(n=e.map)||void 0===n||n.loadImage(t.imagePath,(function(r,n){var o;if(r)throw r;return null===(o=e.map)||void 0===o||o.addImage(t.imageId,n),function(){var r;null===(r=e.map)||void 0===r||r.removeImage(t.imageId)}})))}),[e.map,t])};a.defaultProps={mapId:void 0};const i=a;try{a.displayName="useAddImage",a.__docgenInfo={description:"",displayName:"useAddImage",props:{imageId:{defaultValue:null,description:"",name:"imageId",required:!0,type:{name:"string"}},imagePath:{defaultValue:null,description:"",name:"imagePath",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useAddImage/useAddImage.tsx#useAddImage"]={docgenInfo:a.__docgenInfo,name:"useAddImage",path:"src/hooks/useAddImage/useAddImage.tsx#useAddImage"})}catch(t){}var l=r(64324),u=r(76956),c=r(90574),s=r(67348);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(){return d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},d.apply(this,arguments)}const y={title:"hooks/useAddImage",component:i,argTypes:{},decorators:l.Z};var b=function(t){var e=(0,o.Z)({mapId:void 0});return i({imageId:"wgLogo",imagePath:s}),(0,n.useEffect)((function(){var t;null===(t=e.map)||void 0===t||t.flyTo({center:[10.251805123900311,51.11826171422632],zoom:5})}),[e.map]),n.createElement(n.Fragment,null,n.createElement(u.Z,d({layout:{"icon-image":"wgLogo","icon-size":{property:"Mitarbeitende",stops:[[3,.02],[26,.15]]}}},t)))}.bind({});b.parameters={},b.args={geojson:c,type:"symbol"},b.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"(props: MlGeoJsonLayerProps) => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tuseAddImage({\n\t\timageId: 'wgLogo',\n\t\timagePath: wg_marker,\n\t});\n\tuseEffect(() => {\n\t\tmapHook.map?.flyTo({ center: [10.251805123900311, 51.11826171422632], zoom: 5 });\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlGeoJsonLayer\n\t\t\t\tlayout={{\n\t\t\t\t\t'icon-image': 'wgLogo',\n\t\t\t\t\t'icon-size': {\n\t\t\t\t\t\tproperty: 'Mitarbeitende',\n\t\t\t\t\t\tstops: [\n\t\t\t\t\t\t\t[3, 0.02],\n\t\t\t\t\t\t\t[26, 0.15],\n\t\t\t\t\t\t],\n\t\t\t\t\t} as DataDrivenPropertyValueSpecification<number>,\n\t\t\t\t}}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</>\n\t);\n}"}},b.parameters);var v=["ExampleConfig"]},15426:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>f,__namedExportsOrder:()=>m,default:()=>p});var n=r(67294),o=r(14573),a=r(64324),i=r(32714),l=r(11970);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const p={title:"hooks/useAddProtocol",component:o.Z,argTypes:{},decorators:a.Z};var f=function(){return(0,o.Z)({protocol:"mbtiles",handler:l.GV}),n.createElement(n.Fragment,null,n.createElement(i.Z,{mapId:"map_1",url:"mbtiles://mbtiles/countries.mbtiles/{z}/{x}/{y}",layers:[{id:"countries",type:"fill","source-layer":"countries",layout:{},paint:{"fill-color":"#f9a5f5","fill-opacity":.5}}],insertBeforeLayer:"waterway-name",sourceOptions:{type:"vector",minzoom:0,maxzoom:1}}))}.bind({});f.parameters={},f.args={},f.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"() => {\n\tuseAddProtocol({\n\t\tprotocol: 'mbtiles',\n\t\thandler: mbTilesProtocolHandler,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<MlVectorTileLayer\n\t\t\t\tmapId={'map_1'}\n\t\t\t\turl={'mbtiles://mbtiles/countries.mbtiles/{z}/{x}/{y}'}\n\t\t\t\tlayers={\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'countries',\n\t\t\t\t\t\t\ttype: 'fill',\n\t\t\t\t\t\t\t'source-layer': 'countries',\n\t\t\t\t\t\t\tlayout: {},\n\t\t\t\t\t\t\tpaint: { 'fill-color': '#f9a5f5', 'fill-opacity': 0.5 },\n\t\t\t\t\t\t},\n\t\t\t\t\t] as unknown as LayerSpecification[]\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t\tsourceOptions={{\n\t\t\t\t\ttype: 'vector',\n\t\t\t\t\tminzoom: 0,\n\t\t\t\t\tmaxzoom: 1,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n}"}},f.parameters);var m=["ExampleConfig"]},1933:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>w,__namedExportsOrder:()=>P,default:()=>h});var n=r(67294),o=r(46846),a=r(18434),i=r(54553),l=r(72642),u=r(33797),c=r(2658),s=r(60195),p=r(76956),f=r(17781);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const h={title:"Hooks/useCameraFollowPath",component:o.Z,argTypes:{},decorators:i.Z};var S={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[7.10942788610961,50.708209240168],[7.10966149846967,50.7088867160122],[7.10910082880551,50.7108256986007],[7.10856352037736,50.7126945974813],[7.1083532692533,50.7142598002937],[7.10814301812924,50.7160118929942],[7.10793276700518,50.7169463424345],[7.10776923835314,50.7176004570426],[7.10713848498096,50.718838602551],[7.10699831756492,50.7199599418793],[7.106900786313568,50.72118132611057]]}},O=[{value:15,label:"15"},{value:16,label:"16"},{value:17,label:"17"},{value:18,label:"18"},{value:19,label:"19"},{value:20,label:"20"}],w=function(){var t=v((0,n.useState)({pause:!0,zoom:18,speed:1,pitch:60}),2),e=t[0],r=t[1],i=(0,o.Z)({route:S,pause:e.pause,pitch:e.pitch,zoom:e.zoom,speed:e.speed}),m=v((0,n.useState)(!0),2),d=m[0],b=m[1],g=v((0,n.useState)(!0),2),h=g[0],w=g[1];return n.createElement(n.Fragment,null,n.createElement(a.Z,{buttons:n.createElement(l.Z,{variant:h?"contained":"outlined",onClick:function(){return w(!h)},sx:{marginRight:{xs:"0px",sm:"10px"}}},"Camera Settings")}),n.createElement(f.Z,{open:h,setOpen:w,name:"Camera Settings"},n.createElement(u.Z,{onClick:function(){return b(!d)}},n.createElement(c.Z,null,d?"Hide route":"Show route")),d?n.createElement(p.Z,{geojson:S,type:"line",paint:{"line-width":2,"line-color":"blue"}}):null,n.createElement(u.Z,{disabled:!e.pause,onClick:function(){return r((function(t){return y(y({},t),{},{pause:!1})}))}},n.createElement(c.Z,null,"Start")),n.createElement(u.Z,{disabled:e.pause,onClick:function(){return r((function(t){return y(y({},t),{},{pause:!0})}))}},n.createElement(c.Z,null,"Pause")),n.createElement(u.Z,{onClick:function(){r((function(t){return y(y({},t),{},{pause:!0,pitch:60,zoom:18,speed:1})})),setTimeout((function(){i.reset()}),50)}},n.createElement(c.Z,null,"Reset")),n.createElement(u.Z,null,n.createElement(c.Z,{id:"discrete-slider",style:{marginLeft:"10px",marginRight:"10px"}},n.createElement(c.Z,null,"Zoom:")),n.createElement(s.ZP,{value:e.zoom,onChange:function(t,e){r((function(t){return y(y({},t),{},{zoom:Number(e)})}))},getAriaValueText:function(t){return t.toString()},"aria-labelledby":"discrete-slider",step:1,marks:O,min:15,max:20,sx:{marginTop:"20px",paddingBottom:"20px",marginRight:"10px",maxWidth:"200px",minWidth:"150px"}})),n.createElement(u.Z,null,n.createElement(c.Z,{id:"discrete-slider2",style:{marginLeft:"10px",marginRight:"10px"}},"Speed:"),n.createElement(s.ZP,{value:e.speed,onChange:function(t,e){r((function(t){return y(y({},t),{},{speed:Number(e)})}))},getAriaValueText:function(t){return t.toString()},"aria-labelledby":"discrete-slider2",step:.1,marks:!0,min:.1,max:2,sx:{marginRight:"10px",maxWidth:"200px",minWidth:"150px"}})),n.createElement(u.Z,{onClick:function(){0===e.pitch?r((function(t){return y(y({},t),{},{pitch:60})})):r((function(t){return y(y({},t),{},{pitch:0})}))}},n.createElement(c.Z,null,0===e.pitch?"3D":"2D"))))}.bind({});w.parameters={},w.args={},w.parameters=y({storySource:{source:"() => {\n\tconst [state, setState] = useState({ pause: true, zoom: 18, speed: 1, pitch: 60 });\n\n\tconst CameraFollowPath = useCameraFollowPath({\n\t\troute: routeJson,\n\t\tpause: state.pause,\n\t\tpitch: state.pitch,\n\t\tzoom: state.zoom,\n\t\tspeed: state.speed,\n\t});\n\n\tconst [showRoute, setShowRoute] = useState(true);\n\tconst [openSidebar, setOpenSidebar] = useState(true);\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={openSidebar ? 'contained' : 'outlined'}\n\t\t\t\t\t\tonClick={() => setOpenSidebar(!openSidebar)}\n\t\t\t\t\t\tsx={{ marginRight: { xs: '0px', sm: '10px' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\tCamera Settings\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<Sidebar\n\t\t\t\topen={openSidebar}\n\t\t\t\tsetOpen={setOpenSidebar}\n\t\t\t\tname={'Camera Settings'}\n\t\t\t>\n\t\t\t\t<MenuItem onClick={() => setShowRoute(!showRoute)}>\n\t\t\t\t\t<Typography>{showRoute ? 'Hide route' : 'Show route'}</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t{showRoute ? (\n\t\t\t\t\t<MlGeoJsonLayer\n\t\t\t\t\t\tgeojson={routeJson}\n\t\t\t\t\t\ttype=\"line\"\n\t\t\t\t\t\tpaint={{\n\t\t\t\t\t\t\t'line-width': 2,\n\t\t\t\t\t\t\t'line-color': 'blue',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t<MenuItem\n\t\t\t\t\tdisabled={!state.pause}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\treturn { ...current, pause: false };\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<Typography>Start</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tdisabled={state.pause}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\treturn { ...current, pause: true };\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<Typography>Pause</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\treturn { ...current, pause: true, pitch: 60, zoom: 18, speed: 1 };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tCameraFollowPath.reset();\n\t\t\t\t\t\t}, 50);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Typography>Reset</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem>\n\t\t\t\t\t<Typography id=\"discrete-slider\" style={{ marginLeft: '10px', marginRight: '10px' }}>\n\t\t\t\t\t\t<Typography>Zoom:</Typography>\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Slider\n\t\t\t\t\t\tvalue={state.zoom}\n\t\t\t\t\t\tonChange={(ev, value) => {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, zoom: Number(value) };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgetAriaValueText={(value) => value.toString()}\n\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\n\t\t\t\t\t\t//valueLabelDisplay=\"auto\"\n\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\tmarks={marks}\n\t\t\t\t\t\tmin={15}\n\t\t\t\t\t\tmax={20}\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tmarginTop: '20px',\n\t\t\t\t\t\t\tpaddingBottom: '20px',\n\t\t\t\t\t\t\tmarginRight: '10px',\n\t\t\t\t\t\t\tmaxWidth: '200px',\n\t\t\t\t\t\t\tminWidth: '150px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem>\n\t\t\t\t\t<Typography id=\"discrete-slider2\" style={{ marginLeft: '10px', marginRight: '10px' }}>\n\t\t\t\t\t\tSpeed:\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Slider\n\t\t\t\t\t\tvalue={state.speed}\n\t\t\t\t\t\tonChange={(ev, value) => {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, speed: Number(value) };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgetAriaValueText={(value) => value.toString()}\n\t\t\t\t\t\taria-labelledby=\"discrete-slider2\"\n\t\t\t\t\t\t//valueLabelDisplay=\"auto\"\n\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\tmarks\n\t\t\t\t\t\tmin={0.1}\n\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tmarginRight: '10px',\n\t\t\t\t\t\t\tmaxWidth: '200px',\n\t\t\t\t\t\t\tminWidth: '150px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (state.pitch === 0) {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, pitch: 60 };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, pitch: 0 };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Typography>{state.pitch === 0 ? '3D' : '2D'}</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t</Sidebar>\n\t\t</>\n\t);\n}"}},w.parameters);var P=["ExampleConfig"]},19850:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>s,__namedExportsOrder:()=>p,default:()=>c});var n=r(67294),o=r(43954),a=r(54553);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const c={title:"Hooks/useGpx",component:o.Z,argTypes:{},decorators:a.Z};var s=function(){return n.createElement("useGpx",null)}.bind({});s.parameters={},s.args={},s.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"() => <useGpx />"}},s.parameters);var p=["ExampleConfig"]},48494:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>f,__namedExportsOrder:()=>m,default:()=>p});var n=r(67294),o=r(31805),a=r(54553),i=r(76956),l=r(52124);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const p={title:"hooks/useLayerFilter",component:o.Z,argTypes:{},decorators:a.Z};var f=function(t){return(0,o.Z)({layerId:"filter_test",filter:["==","name",t.filter_name]}),n.createElement(i.Z,{layerId:"filter_test",geojson:l})}.bind({});f.parameters={},f.args={filter_name:"Mauspfad"},f.argTypes={filter_name:{options:["Mauspfad","Windeckstraße","Münsterplatz","Postrstraße","In der Sürst","Remiglustraße"],control:{type:"radio"}}},f.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"(args: { filter_name: string }) => {\n\tuseLayerFilter({ layerId: 'filter_test', filter: ['==', 'name', args.filter_name] });\n\treturn <MlGeoJsonLayer layerId=\"filter_test\" geojson={sample as FeatureCollection} />;\n}"}},f.parameters);var m=["ExampleConfig"]},91594:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>s,__namedExportsOrder:()=>p,default:()=>c});var n=r(67294),o=r(77062),a=r(54553);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const c={title:"Hooks/useLayerHoverPopup",component:o.Z,argTypes:{},decorators:a.Z};var s=function(){return n.createElement("useLayerHoverPopup",null)}.bind({});s.parameters={},s.args={},s.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"() => <useLayerHoverPopup />"}},s.parameters);var p=["ExampleConfig"]},9491:(t,e,r)=>{r.r(e),r.d(e,{IncludeBaseLayers:()=>m,MatchLayerIdRegexp:()=>y,MatchLayerIdString:()=>d,NonBaseLayersOnly:()=>b,ViewportOnly:()=>f,__namedExportsOrder:()=>v,default:()=>s});var n=r(67294),o=r(90686),a=r(61669);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const s={title:"Hooks/useMapState",component:o.Z,argTypes:{},decorators:a.Z};var p=function(t){var e=(0,o.Z)(u({},t));return(0,n.useEffect)((function(){}),[e.layers]),n.createElement(n.Fragment,null,n.createElement("div",{style:{position:"fixed",zIndex:1e4,display:"flex",flexWrap:"wrap",top:0,left:0,right:0,bottom:0,maxHeight:"100VH",backgroundColor:"rgba(80,80,80,.8)",padding:"50px",fontSize:"20px",color:"#51ff09",overflow:"hidden",pointerEvents:"none"}},n.createElement("pre",null,JSON.stringify(e,null,"\t"))))},f=p.bind({});f.parameters={},f.args={mapId:"map_1",watch:{viewport:!0,layers:!1,sources:!1}};var m=p.bind({});m.parameters={},m.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0}};var d=p.bind({});d.parameters={},d.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:"water"}};var y=p.bind({});y.parameters={},y.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:/water/}};var b=p.bind({});b.parameters={},b.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}},f.parameters=u({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},f.parameters),m.parameters=u({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},m.parameters),d.parameters=u({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},d.parameters),y.parameters=u({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},y.parameters),b.parameters=u({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},b.parameters);var v=["ViewportOnly","IncludeBaseLayers","MatchLayerIdString","MatchLayerIdRegexp","NonBaseLayersOnly"]},33024:(t,e,r)=>{r.r(e),r.d(e,{__namedExportsOrder:()=>j,default:()=>h,removeSourceExample:()=>P,useGeojsonSourceExample:()=>S,useRasterSourceExample:()=>w,useVectorSourceExample:()=>O});var n=r(13116),o=r(67294),a=r(31072),i=r(90686),l=r(86841),u=r(18434),c=r(72642),s=r(67570),p=r(61669);const f=JSON.parse('{"type":"Feature","geometry":{"type":"Point","coordinates":[7.0851268,50.73884],"properties":{"title":"Bonn"}}}');function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const h={title:"Hooks/useSource",component:n.Z,argTypes:{},decorators:p.Z};var S=function(t){var e=(0,n.Z)(v({},t)).source;return(0,l.Z)({mapId:t.mapId,layerId:"layer1",options:{source:null!=e&&e.id?e.id:"",type:"circle",paint:{"circle-radius":6,"circle-color":"red"}}}),(0,l.Z)({mapId:t.mapId,layerId:"layer2",options:{source:null!=e&&e.id?e.id:"",type:"circle",paint:{"circle-radius":4,"circle-color":"green"}}}),o.createElement(o.Fragment,null)}.bind({});S.args={mapId:"map_1",sourceId:"geojson-source",source:{type:"geojson",data:f}};var O=function(t){(0,n.Z)(v({},t));var e=(0,a.Z)({mapId:t.mapId});return(0,o.useEffect)((function(){e.map&&(e.map.addLayer({id:"vector-lineLayer",type:"line",source:t.sourceId,minzoom:0,maxzoom:22,"source-layer":"landuse",layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":2,"line-color":"#ff0000"}},!1,e.componentId),e.map.addLayer({id:"vector-FillLayer",type:"fill",source:t.sourceId,minzoom:0,maxzoom:22,"source-layer":"landuse",paint:{"fill-color":"#32a850","fill-opacity":.4}},!1,e.componentId))}),[e.map]),o.createElement(o.Fragment,null)}.bind({});O.args={mapId:"map_1",sourceId:"vector-source",source:{type:"vector",tiles:["https://wms.wheregroup.com/tileserver/tile/tileserver.php?/europe-0-14/index.json?/europe-0-14/{z}/{x}/{y}.pbf"],tilesize:512,attribution:""}};var w=function(t){(0,n.Z)(v({},t));var e=(0,a.Z)({mapId:t.mapId});return(0,o.useEffect)((function(){e.map&&e.map.addLayer({id:"raster-wms",type:"raster",source:t.sourceId,minzoom:0,maxzoom:22},!1,e.componentId)}),[e.map]),o.createElement(o.Fragment,null)}.bind({});w.args={mapId:"map_1",sourceId:"raster-source",source:{type:"raster",tiles:["https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&styles=&layers=nw_uraufnahme_rw"],tilesize:256,attribution:""}};var P=function(t){var e=d((0,o.useState)(!0),2),r=e[0],n=e[1],l=d((0,o.useState)([]),2),p=l[0],f=l[1],m=(0,a.Z)({mapId:t.mapId}),y=(0,i.Z)({mapId:t.mapId,watch:{viewport:!1,layers:!0,sources:!0},filter:{includeBaseLayers:!1}});return(0,o.useEffect)((function(){m.map&&m.map.map.on("sourcedata",(function(){var t,e,r,n;null!=m&&null!==(t=m.map)&&void 0!==t&&null!==(e=t.map)&&void 0!==e&&e.style.sourceCaches&&f(Object.keys(null==m||null===(r=m.map)||void 0===r||null===(n=r.map)||void 0===n?void 0:n.style.sourceCaches))}))}),[m.map]),o.createElement(o.Fragment,null,o.createElement(u.Z,{buttons:o.createElement(c.Z,{color:"primary",variant:r?"contained":"outlined",onClick:function(){return n(!r)}},"Ml GeoJsonLayer With Source JSX Active?")}),r&&o.createElement(s.Z,null),o.createElement("div",{style:{position:"fixed",zIndex:1290,display:"flex",flexWrap:"wrap",top:"62px",left:0,right:0,bottom:0,maxHeight:"100VH",backgroundColor:"rgba(80,80,80,.8)",padding:"50px",fontSize:"20px",color:"#51ff09",overflow:"hidden",pointerEvents:"none"}},(null==p?void 0:p.length)>0&&o.createElement("div",null,"Active sources: ",o.createElement("br",null)," ",JSON.stringify(p,null,"  "),o.createElement("br",null)," ",o.createElement("br",null)," Active layers : ",o.createElement("pre",null,JSON.stringify(y,null,"  ")))))}.bind({});P.args={mapId:"map_1"},S.parameters=v({storySource:{source:"(args) => {\n\tconst { source } = useSource({ ...args });\n\n\tuseLayer({\n\t\tmapId: args.mapId,\n\t\tlayerId: 'layer1',\n\t\toptions: {\n\t\tsource: source?.id ? source.id : '',\n\t\t\ttype: 'circle',\n\t\t\tpaint: {\n\t\t\t\t'circle-radius': 6,\n\t\t\t\t'circle-color': 'red',\n\t\t\t},\n\t\t},\n\t});\n\tuseLayer({\n\t\tmapId: args.mapId,\n\t\tlayerId: 'layer2',\n\t\toptions: {\n\t\tsource: source?.id ? source.id : '',\n\t\t\ttype: 'circle',\n\t\t\tpaint: {\n\t\t\t\t'circle-radius': 4,\n\t\t\t\t'circle-color': 'green',\n\t\t\t},\n\t\t},\n\t});\n\treturn <></>;\n}"}},S.parameters),O.parameters=v({storySource:{source:"(args) => {\n\tuseSource({ ...args });\n\tconst mapHook = useMap({\n\t\tmapId: args.mapId,\n\t});\n\tuseEffect(() => {\n\t\tif (!mapHook.map) return;\n\t\tmapHook.map.addLayer(\n\t\t\t{\n\t\t\t\tid: 'vector-lineLayer',\n\t\t\t\ttype: 'line',\n\t\t\t\tsource: args.sourceId,\n\t\t\t\tminzoom: 0,\n\t\t\t\tmaxzoom: 22,\n\t\t\t\t'source-layer': 'landuse',\n\t\t\t\tlayout: {\n\t\t\t\t\t'line-cap': 'round',\n\t\t\t\t\t'line-join': 'round',\n\t\t\t\t},\n\t\t\t\tpaint: { 'line-width': 2, 'line-color': '#ff0000' },\n\t\t\t},\n\t\t\tfalse,\n\t\t\tmapHook.componentId\n\t\t);\n\t\tmapHook.map.addLayer(\n\t\t\t{\n\t\t\t\tid: 'vector-FillLayer',\n\t\t\t\ttype: 'fill',\n\t\t\t\tsource: args.sourceId,\n\t\t\t\tminzoom: 0,\n\t\t\t\tmaxzoom: 22,\n\t\t\t\t'source-layer': 'landuse',\n\t\t\t\tpaint: {\n\t\t\t\t\t'fill-color': '#32a850',\n\t\t\t\t\t'fill-opacity': 0.4,\n\t\t\t\t},\n\t\t\t},\n\t\t\tfalse,\n\t\t\tmapHook.componentId\n\t\t);\n\t}, [mapHook.map]);\n\treturn <></>;\n}"}},O.parameters),w.parameters=v({storySource:{source:"(args) => {\n\tuseSource({ ...args });\n\tconst mapHook = useMap({\n\t\tmapId: args.mapId,\n\t});\n\tuseEffect(() => {\n\t\tif (!mapHook.map) return;\n\t\tmapHook.map.addLayer(\n\t\t\t{\n\t\t\t\tid: 'raster-wms',\n\t\t\t\ttype: 'raster',\n\t\t\t\tsource: args.sourceId,\n\t\t\t\tminzoom: 0,\n\t\t\t\tmaxzoom: 22,\n\t\t\t},\n\t\t\tfalse,\n\t\t\tmapHook.componentId\n\t\t);\n\t}, [mapHook.map]);\n\treturn <></>;\n}"}},w.parameters),P.parameters=v({storySource:{source:"(args) => {\n\tconst [sourceStatus, setSourceStatus] = useState(true);\n\tconst [activeSources, setActiveSources] = useState([]);\n\tconst mapHook = useMap({\n\t\tmapId: args.mapId,\n\t});\n\n\tconst mapState = useMapState({\n\t\tmapId: args.mapId,\n\t\twatch: {\n\t\t\tviewport: false,\n\t\t\tlayers: true,\n\t\t\tsources: true,\n\t\t},\n\t\tfilter: {\n\t\t\tincludeBaseLayers: false,\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map) {\n\t\t\treturn;\n\t\t}\n\n\t\tmapHook.map.map.on('sourcedata', () => {\n\t\t\tif (mapHook?.map?.map?.style.sourceCaches) {\n\t\t\t\tsetActiveSources(Object.keys(mapHook?.map?.map?.style.sourceCaches));\n\t\t\t}\n\t\t});\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant={sourceStatus ? 'contained' : 'outlined'}\n\t\t\t\t\t\tonClick={() => setSourceStatus(!sourceStatus)}\n\t\t\t\t\t>\n\t\t\t\t\t\tMl GeoJsonLayer With Source JSX Active?\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{sourceStatus && <MlGeojsonLayerWithSource></MlGeojsonLayerWithSource>}\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\tzIndex: 1290,\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tflexWrap: 'wrap',\n\t\t\t\t\ttop: '62px',\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight: '100VH',\n\t\t\t\t\tbackgroundColor: 'rgba(80,80,80,.8)',\n\t\t\t\t\tpadding: '50px',\n\t\t\t\t\tfontSize: '20px',\n\t\t\t\t\tcolor: '#51ff09',\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\tpointerEvents: 'none',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{activeSources?.length > 0 && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\tActive sources: <br></br> {JSON.stringify(activeSources, null, '  ')}\n\t\t\t\t\t\t<br></br> <br></br> Active layers : {}\n\t\t\t\t\t\t<pre>{JSON.stringify(mapState, null, '  ')}</pre>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}"}},P.parameters);var j=["useGeojsonSourceExample","useVectorSourceExample","useRasterSourceExample","removeSourceExample"]},14573:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(24613),o=r.n(n),a=r(67294),i=function(t){return(0,a.useEffect)((function(){if(t.protocol&&"function"==typeof t.handler)return o().addProtocol(t.protocol,t.handler),function(){o().removeProtocol(t.protocol)}}),[]),{}};i.defaultProps={mapId:void 0};const l=i;try{i.displayName="useAddProtocol",i.__docgenInfo={description:"Enables the use of custom protocols (basically custom tile load functions) in the maplibre-gl-js library.",displayName:"useAddProtocol",props:{protocol:{defaultValue:null,description:"the protocol string, for example `mbtiles`\nIn this example the handler function is called for all tile requests that start with the string `mbtiles://`",name:"protocol",required:!0,type:{name:"string"}},handler:{defaultValue:null,description:"Custom load tile function that will be called when using a source that starts with a custom url schema.",name:"handler",required:!0,type:{name:"(requestParameters: RequestParameters, callback: ResponseCallback<any>) => Cancelable"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useAddProtocol/useAddProtocol.tsx#useAddProtocol"]={docgenInfo:i.__docgenInfo,name:"useAddProtocol",path:"src/hooks/useAddProtocol/useAddProtocol.tsx#useAddProtocol"})}catch(t){}},46846:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(67294),o=r(30062),a=r(31072),i=function(t){var e=(0,n.useRef)(!1),r=(0,n.useRef)(t.pause),i=(0,n.useRef)(t.zoom),l=(0,n.useRef)(t.pitch),u=(0,n.useRef)(1),c=(0,n.useRef)(t.speed),s=(0,n.useRef)(),p=t.kmPerStep||.01,f=o.sIr(t.route),m=t.stepDuration||70,d=(0,a.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer});(0,n.useEffect)((function(){r.current=t.pause,r.current||g()}),[t.pause]),(0,n.useEffect)((function(){d.map&&(i.current=t.zoom,void 0!==i.current&&d.map.map.getZoom()!==i.current&&d.map.map.setZoom(i.current))}),[d.map,t.zoom]),(0,n.useEffect)((function(){d.map&&(l.current=t.pitch,void 0!==l.current&&l.current!==d.map.map.getPitch()&&d.map.map.setPitch(l.current))}),[d.map,t.pitch]),(0,n.useEffect)((function(){c.current=t.speed}),[t.speed]);var y=(0,n.useCallback)((function(){d.map&&(d.map.map.scrollZoom.disable(),d.map.map.boxZoom.disable(),d.map.map.dragRotate.disable(),d.map.map.dragPan.disable(),d.map.map.keyboard.disable(),d.map.map.doubleClickZoom.disable(),d.map.map.touchZoomRotate.disable())}),[d.map]),b=(0,n.useCallback)((function(){d.map&&(d.map.map.scrollZoom.enable(),d.map.map.boxZoom.enable(),d.map.map.dragRotate.enable(),d.map.map.dragPan.enable(),d.map.map.keyboard.enable(),d.map.map.doubleClickZoom.enable(),d.map.map.touchZoomRotate.enable())}),[d.map]);function v(){if(d.map&&t.route){var e,r=o.VWR(t.route);r&&r.length>3&&(e=[[r[0],r[1]],[r[2],r[3]]],d.map.map.fitBounds(e,{padding:100}))}}function g(){if(d.map)if(r.current)b();else{y(),void 0!==i.current&&d.map.map.getZoom()!==i.current&&d.map.map.setZoom(i.current);var e=o.$1t(t.route,u.current*p).geometry.coordinates;u.current*p<f?(d.map.map.easeTo({center:e,bearing:o.Y30(o.xmu([d.map.map.getCenter().lng,d.map.map.getCenter().lat]),o.xmu(e)),duration:m,essential:!0}),void 0!==c.current?u.current=u.current+c.current:u.current++,console.log("PAN MOVE"),setTimeout((function(){g()}),100)):(d.map.map.setPitch(0),v(),b(),console.log("ENABLE CONTROLS"),u.current=1)}}return(0,n.useEffect)((function(){d.map&&!e.current&&(e.current=!0,v())}),[d.map]),(0,n.useEffect)((function(){return function(){s.current&&clearTimeout(s.current)}}),[]),{play:g,reset:function(){d.map&&(v(),b(),u.current=1)}}};i.defaultProps={mapId:void 0,zoom:18};const l=i;try{i.displayName="useCameraFollowPath",i.__docgenInfo={description:"Component template",displayName:"useCameraFollowPath",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},pause:{defaultValue:null,description:"",name:"pause",required:!1,type:{name:"boolean | undefined"}},zoom:{defaultValue:{value:"18"},description:"",name:"zoom",required:!1,type:{name:"number | undefined"}},pitch:{defaultValue:null,description:"",name:"pitch",required:!1,type:{name:"number | undefined"}},speed:{defaultValue:null,description:"",name:"speed",required:!1,type:{name:"number | undefined"}},kmPerStep:{defaultValue:null,description:"",name:"kmPerStep",required:!1,type:{name:"number | undefined"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"any"}},stepDuration:{defaultValue:null,description:"",name:"stepDuration",required:!1,type:{name:"number | undefined"}},timeoutId:{defaultValue:null,description:"",name:"timeoutId",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useCameraFollowPath/useCameraFollowPath.tsx#useCameraFollowPath"]={docgenInfo:i.__docgenInfo,name:"useCameraFollowPath",path:"src/hooks/useCameraFollowPath/useCameraFollowPath.tsx#useCameraFollowPath"})}catch(t){}},76273:(t,e,r)=>{r.d(e,{Z:()=>y});var n=r(67294),o=r(31072),a=r(24613),i=r(91819);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===l(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){var e=t.width,r=t.height,n=document.createElement("div");n.className="hidden-map",n.style.width="0px",n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n);var o=document.createElement("div");o.style.width=e+"px",o.style.height=r+"px",n.appendChild(o);var l=t.map.map.getStyle(),u=function(){var t=l.sources[s];Object.keys(t).forEach((function(e){t[e]||delete t[e]}))};for(var s in l.sources)u();var p=new a.Map({container:o,center:t.map.map.getCenter(),zoom:t.map.map.getZoom(),bearing:0,pitch:0,interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,style:l}),f=p._cameraForBoxAndBearing([t.bboxUnrotated[0],t.bboxUnrotated[1]],[t.bboxUnrotated[2],t.bboxUnrotated[3]],t.bearing+t.map.map.getBearing());return p._fitInternal(f),new Promise((function(e){console.log("before idle"),p.once("idle",(function(){var r=c(c({},t),{},{renderMap:p,hiddenContainer:n,createPdf:function(e){return function(t){var e=new i.ZP({orientation:"portrait"===(null==t?void 0:t.orientation)?"p":"l",unit:"mm",compress:!0,format:t.format});return Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}}),new Promise((function(r){var n;e.addImage(t.renderMap.getCanvas().toDataURL("image/png"),"png",0,0,e.internal.pageSize.getWidth(),e.internal.pageSize.getHeight(),void 0,"FAST"),t.renderMap.remove(),null===(n=t.hiddenContainer.parentNode)||void 0===n||n.removeChild(t.hiddenContainer);var o=c(c({},t),{},{pdf:e,downloadPdf:function(t){return function(t){return t.pdf.save("Map.pdf"),new Promise((function(e){e(c({},t))}))}(c(c({},o),t))}});r(o)}))}(c(c({},t),{},{renderMap:p,hiddenContainer:n},e))},createPng:function(e){return function(t){return new Promise((function(e){var r=t.renderMap.getCanvas().toDataURL("image/png"),n=c(c({},t),{},{png:r,downloadPng:function(t){return function(t){var e=document.createElement("a");return e.download=null!=t&&t.name?t.name+".png":"map.png",e.href=t.png,document.body.appendChild(e),e.click(),document.body.removeChild(e),new Promise((function(e){e(c({},t))}))}(c(c({},n),t))}});e(n)}))}(c(c({},t),{},{renderMap:p,hiddenContainer:n},e))}});e(r)}))}))};function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=(0,o.Z)({mapId:t.mapId}),r=(0,n.useMemo)((function(){if(e.map)return function(t){return p(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({map:e.map},t))}}),[e.map]);return{createExport:r}}},52122:(t,e,r)=>{r.d(e,{Z:()=>f});var n=r(67294),o=(r(93478),r(1307)),a=r.n(o),i=r(31072),l=r(98396);const u=function(){var t=(0,l.Z)((function(t){return t.breakpoints.down("md")}));return[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":t?7:5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":t?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":t?7:5,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":t?10:9,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":t?7.5:6.5,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":t?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":t?8.5:7.5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":t?8.5:6.5,"circle-color":"#404040"}}]};function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=function(t){console.log(u());var e=(0,n.useRef)(),r=(0,i.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer}),o=(0,n.useRef)(!1),l=c((0,n.useState)(!1),2),s=l[0],p=l[1],f=c((0,n.useState)(),2),m=f[0],d=f[1],y=u(),b=(0,n.useCallback)((function(e){console.log("MlFeatureEditor mode change to "+e.mode),"function"==typeof t.onFinish&&"simple_select"===e.mode&&t.onFinish()}),[t.onFinish]);return(0,n.useEffect)((function(){var n;r.map&&!o.current&&(o.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&e.current&&(null===(n=e.current)||void 0===n||n.remove()),e.current=new(a())({displayControlsDefault:!1,defaultMode:t.mode||"simple_select",modes:Object.assign({},a().modes),userProperties:!0,styles:y}),r.map.addControl(e.current,"top-left",r.componentId),r.map.on("draw.modechange",b,r.componentId),p(!0))}),[r.map,t,o,b]),(0,n.useEffect)((function(){if(r.map&&s){var n=function(){if(e.current){var r,n,o=null===(r=(n=e.current).getAll)||void 0===r?void 0:r.call(n);d(null==o?void 0:o.features),"function"==typeof t.onChange&&t.onChange(null==o?void 0:o.features)}};return r.map.on("mouseup",n),r.map.on("touchend",n),function(){r.map&&(r.map.map.off("mouseup",n),r.map.map.off("touchend",n))}}}),[s,r.map]),(0,n.useEffect)((function(){var r;e.current&&null!==(r=t.geojson)&&void 0!==r&&r.geometry&&e.current.set({type:"FeatureCollection",features:[t.geojson]})}),[t.geojson,s]),(0,n.useEffect)((function(){var r,n,o,a;t.mode&&e.current&&(null===(r=e.current)||void 0===r||null===(n=r.getMode)||void 0===n?void 0:n.call(r))!==t.mode&&(null===(o=e.current)||void 0===o||null===(a=o.changeMode)||void 0===a||a.call(o,t.mode),"simple_select"!==t.mode&&"direct_select"!==t.mode&&e.current.set({type:"FeatureCollection",features:[]}))}),[t.mode,r.map]),{feature:m,drawToolsReady:s,draw:e.current}};const f=p;try{p.displayName="useFeatureEditor",p.__docgenInfo={description:"GeoJson Feature editor that allows to create or manipulate GeoJson data",displayName:"useFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry | GeometryCollection, Properties> | undefined"}},onChange:{defaultValue:null,description:"Callback function that is called each time the GeoJson data within has changed within MlFeatureEditor.\nFirst parameter is the new GeoJson feature.",name:"onChange",required:!1,type:{name:"((para: GeoJSONObject[]) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.\nFirst parameter is the new GeoJson feature.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:"Feature editor modes:\n- draw_line_string\n- draw_polygon\n- draw_point\n- simple_select\n- direct_select",name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useFeatureEditor/useFeatureEditor.tsx#useFeatureEditor"]={docgenInfo:p.__docgenInfo,name:"useFeatureEditor",path:"src/hooks/useFeatureEditor/useFeatureEditor.tsx#useFeatureEditor"})}catch(t){}},43954:(t,e,r)=>{r.d(e,{Z:()=>f});var n=r(67294),o=r(3969),a=r(34155);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}const l=function(){var t,e=/\s*/g,r=/^\s*|\s*$/g,n=/\s+/;function l(t){if(!t||!t.length)return 0;for(var e=0,r=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e)|0;return r}function u(t,e){return t.getElementsByTagName(e)}function c(t,e){return t.getAttribute(e)}function s(t,e){return parseFloat(c(t,e))}function p(t,e){var r=u(t,e);return r.length?r[0]:null}function f(t){for(var e=0,r=[];e<t.length;e++)r[e]=parseFloat(t[e]);return r}function m(t){var e;return t&&(e=t).normalize&&e.normalize(),t&&t.textContent||""}function d(t,e){var r,n,o={};for(n=0;n<e.length;n++)(r=p(t,e[n]))&&(o[e[n]]=m(r));return o}function y(t,e){for(var r in e)t[r]=e[r]}function b(t){return f(t.replace(e,"").split(","))}function v(t){for(var e=t.replace(r,"").split(n),o=[],a=0;a<e.length;a++)o.push(b(e[a]));return o}function g(t){var e,r=[s(t,"lon"),s(t,"lat")],n=p(t,"ele"),o=p(t,"gpxtpx:hr")||p(t,"hr"),a=p(t,"time");return n&&(e=parseFloat(m(n)),isNaN(e)||r.push(e)),{coordinates:r,time:a?m(a):null,heartRate:o?parseFloat(m(o)):null}}if("undefined"!=typeof XMLSerializer)t=new XMLSerializer;else{var h="object"===(void 0===a?"undefined":i(a))&&!a.browser,S="object"===("undefined"==typeof Titanium?"undefined":i(Titanium));if("object"!==("undefined"==typeof exports?"undefined":i(exports))||!h&&!S)throw new Error("Unable to initialize serializer");t=o.B}function O(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return{kml:function(t){for(var e={type:"FeatureCollection",features:[]},r={},n={},o={},a=["Polygon","LineString","Point","Track","gx:Track"],i=u(t,"Placemark"),s=u(t,"Style"),d=u(t,"StyleMap"),y=0;y<s.length;y++){var g=l(O(s[y])).toString(16);r["#"+c(s[y],"id")]=g,n[g]=s[y]}for(var h=0;h<d.length;h++){r["#"+c(d[h],"id")]=l(O(d[h])).toString(16);for(var S=u(d[h],"Pair"),w={},P=0;P<S.length;P++)w[m(p(S[P],"key"))]=m(p(S[P],"styleUrl"));o["#"+c(d[h],"id")]=w}for(var j=0;j<i.length;j++)e.features=e.features.concat(L(i[j]));function I(t){var e,r;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(r=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)),[e,isNaN(r)?void 0:r]}function x(t){var e=u(t,"coord"),r=[],n=[];0===e.length&&(e=u(t,"gx:coord"));for(var o=0;o<e.length;o++)r.push(f(m(e[o]).split(" ")));for(var a=u(t,"when"),i=0;i<a.length;i++)n.push(m(a[i]));return{coords:r,times:n}}function E(t){var e,r,n,o,i,l=[],c=[];if(p(t,"MultiGeometry"))return E(p(t,"MultiGeometry"));if(p(t,"MultiTrack"))return E(p(t,"MultiTrack"));if(p(t,"gx:MultiTrack"))return E(p(t,"gx:MultiTrack"));for(n=0;n<a.length;n++)if(r=u(t,a[n]))for(o=0;o<r.length;o++)if(e=r[o],"Point"===a[n])l.push({type:"Point",coordinates:b(m(p(e,"coordinates")))});else if("LineString"===a[n])l.push({type:"LineString",coordinates:v(m(p(e,"coordinates")))});else if("Polygon"===a[n]){var s=u(e,"LinearRing"),f=[];for(i=0;i<s.length;i++)f.push(v(m(p(s[i],"coordinates"))));l.push({type:"Polygon",coordinates:f})}else if("Track"===a[n]||"gx:Track"===a[n]){var d=x(e);l.push({type:"LineString",coordinates:d.coords}),d.times.length&&c.push(d.times)}return{geoms:l,coordTimes:c}}function L(t){var e,a=E(t),i={},l=m(p(t,"name")),s=m(p(t,"address")),f=m(p(t,"styleUrl")),d=m(p(t,"description")),y=p(t,"TimeSpan"),b=p(t,"TimeStamp"),v=p(t,"ExtendedData"),g=p(t,"LineStyle"),h=p(t,"PolyStyle"),S=p(t,"visibility");if(!a.geoms.length)return[];if(l&&(i.name=l),s&&(i.address=s),f){"#"!==f[0]&&(f="#"+f),i.styleUrl=f,r[f]&&(i.styleHash=r[f]),o[f]&&(i.styleMapHash=o[f],i.styleHash=r[o[f].normal]);var O=n[i.styleHash];if(O){g||(g=p(O,"LineStyle")),h||(h=p(O,"PolyStyle"));var w=p(O,"IconStyle");if(w){var P=p(w,"Icon");if(P){var j=m(p(P,"href"));j&&(i.icon=j)}}}}if(d&&(i.description=d),y){var x=m(p(y,"begin")),L=m(p(y,"end"));i.timespan={begin:x,end:L}}if(b&&(i.timestamp=m(p(b,"when"))),g){var C=I(m(p(g,"color"))),k=C[0],T=C[1],A=parseFloat(m(p(g,"width")));k&&(i.stroke=k),isNaN(T)||(i["stroke-opacity"]=T),isNaN(A)||(i["stroke-width"]=A)}if(h){var _=I(m(p(h,"color"))),R=_[0],Z=_[1],M=m(p(h,"fill")),F=m(p(h,"outline"));R&&(i.fill=R),isNaN(Z)||(i["fill-opacity"]=Z),M&&(i["fill-opacity"]="1"===M?i["fill-opacity"]||1:0),F&&(i["stroke-opacity"]="1"===F?i["stroke-opacity"]||1:0)}if(v){var D=u(v,"Data"),z=u(v,"SimpleData");for(e=0;e<D.length;e++)i[D[e].getAttribute("name")]=m(p(D[e],"value"));for(e=0;e<z.length;e++)i[z[e].getAttribute("name")]=m(z[e])}S&&(i.visibility=m(S)),a.coordTimes.length&&(i.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var H={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:i};return c(t,"id")&&(H.id=c(t,"id")),[H]}return e},gpx:function(t){var e,r,n,o,a=u(t,"trk"),i=u(t,"rte"),l=u(t,"wpt"),s={type:"FeatureCollection",features:[]};for(e=0;e<a.length;e++)(r=v(a[e]))&&s.features.push(r);for(e=0;e<i.length;e++)(r=h(i[e]))&&s.features.push(r);for(e=0;e<l.length;e++)s.features.push((n=l[e],o=void 0,y(o=O(n),d(n,["sym"])),{type:"Feature",properties:o,geometry:{type:"Point",coordinates:g(n).coordinates}}));function f(t,e){for(var r=0;r<e;r++)t.push(null);return t}function b(t,e){var r=u(t,e),n=[],o=[],a=[],i=r.length;if(i<2)return{};for(var l=0;l<i;l++){var c=g(r[l]);n.push(c.coordinates),c.time&&o.push(c.time),(c.heartRate||a.length)&&(a.length||f(a,l),a.push(c.heartRate||null))}return{line:n,times:o,heartRates:a}}function v(t){for(var e,r=u(t,"trkseg"),n=[],o=[],a=[],i=0;i<r.length;i++)if((e=b(r[i],"trkpt"))&&(e.line&&n.push(e.line),e.times&&e.times.length&&o.push(e.times),a.length||e.heartRates&&e.heartRates.length)){if(!a.length)for(var l=0;l<i;l++)a.push(f([],n[l].length));e.heartRates&&e.heartRates.length?a.push(e.heartRates):a.push(f([],e.line.length||0))}if(0!==n.length){var c=O(t);return y(c,S(p(t,"extensions"))),o.length&&(c.coordTimes=1===n.length?o[0]:o),a.length&&(c.heartRates=1===n.length?a[0]:a),{type:"Feature",properties:c,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function h(t){var e=b(t,"rtept");if(e.line){var r=O(t);return y(r,S(p(t,"extensions"))),{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:e.line}}}}function S(t){var e={};if(t){var r=p(t,"line");if(r){var n=m(p(r,"color")),o=parseFloat(m(p(r,"opacity"))),a=parseFloat(m(p(r,"width")));n&&(e.stroke=n),isNaN(o)||(e["stroke-opacity"]=o),isNaN(a)||(e["stroke-width"]=96*a/25.4)}}return e}function O(t){var e=d(t,["name","cmt","desc","type","time","keywords"]),r=u(t,"link");r.length&&(e.links=[]);for(var n,o=0;o<r.length;o++)y(n={href:c(r[o],"href")},d(r[o],["text","type"])),e.links.push(n);return e}return s}}}();function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=function(t){var e=u((0,n.useState)(),2),r=e[0],o=e[1],a=u((0,n.useState)([]),2),i=a[0],p=a[1];return(0,n.useEffect)((function(){t.data&&function(t){try{p([]);var e=(new DOMParser).parseFromString(t,"application/xml"),r=e.querySelector("metadata");null==r||r.childNodes.forEach((function(t){var e,r=t.textContent,n=t.nodeName;if("link"===t.nodeName&&(r=t.getAttribute("href")),null!==(e=r)&&void 0!==e&&e.trim().length){var o={title:n,value:r,id:(new Date).getTime()};p((function(t){return[].concat(function(t){if(Array.isArray(t))return s(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]);var e}))}}));var n=l.gpx(e);o(n)}catch(t){console.log(t)}}(t.data)}),[t.data]),{geojson:r,metadata:i}};p.defaultProps={data:void 0};const f=p;try{p.displayName="useGpx",p.__docgenInfo={description:"useGpx hook converts GPX data to GeoJSON",displayName:"useGpx",props:{data:{defaultValue:{value:"undefined"},description:"a string containing GPX data that is supposed to be parsed and converted to GeoJSON by this hook",name:"data",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useGpx/useGpx.tsx#useGpx"]={docgenInfo:p.__docgenInfo,name:"useGpx",path:"src/hooks/useGpx/useGpx.tsx#useGpx"})}catch(t){}},86841:(t,e,r)=>{r.d(e,{Z:()=>f});var n=r(67294),o=r(31072);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function p(t){var e,r,a=(0,o.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer}),i=(0,n.useRef)(""),u=(0,n.useRef)(""),p=(0,n.useRef)(""),f=(e=(0,n.useState)(),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,r)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],d=f[1],y=(0,n.useRef)(!1),b=(0,n.useRef)(t.layerId||(t.idPrefix?t.idPrefix:"Layer-")+a.componentId),v=(0,n.useCallback)((function(){var e,r;if(a.map&&(null==a||!a.map.cancelled)&&(a.map.map.getLayer(b.current)&&a.cleanup(),a.map.map.getSource(b.current)&&a.map.map.removeSource(b.current),("string"!=typeof t.options.source||""!==t.options.source&&a.map.map.getSource(t.options.source))&&void 0!==t.options.type)){y.current=!0;try{var n,o,c,s,f,m,g,h;a.map.addLayer(l(l(l(l({},t.options),!t.geojson||null!==(n=t.options)&&void 0!==n&&n.source&&(null===(o=t.options)||void 0===o||null===(c=o.source)||void 0===c||!c.attribution||null!==(s=t.options)&&void 0!==s&&null!==(f=s.source)&&void 0!==f&&f.type)?{}:{source:{type:"geojson",data:t.geojson,attribution:null!==(m=t.options.source)&&void 0!==m&&m.attribution?null===(g=t.options.source)||void 0===g?void 0:g.attribution:""}}),"string"==typeof(null===(h=t.options)||void 0===h?void 0:h.source)?{source:t.options.source}:{}),{},{id:b.current}),t.insertBeforeLayer?t.insertBeforeLayer:t.insertBeforeFirstSymbolLayer?a.map.firstSymbolLayer:void 0,a.componentId)}catch(t){console.log(t)}d((function(){var t;return null===(t=a.map)||void 0===t?void 0:t.map.getLayer(b.current)})),void 0!==t.onHover&&a.map.on("mousemove",b.current,t.onHover,a.componentId),void 0!==t.onClick&&a.map.on("click",b.current,t.onClick,a.componentId),void 0!==t.onLeave&&a.map.on("mouseleave",b.current,t.onLeave,a.componentId),a.map.on("styledata",(function(){var t;!y.current||null!==(t=a.map)&&void 0!==t&&t.map.getLayer(b.current)||(console.log("Recreate Layer"),v())}),a.componentId),u.current=JSON.stringify(null===(e=t.options)||void 0===e?void 0:e.paint),p.current=JSON.stringify(null===(r=t.options)||void 0===r?void 0:r.layout),i.current=t.options.type}}),[t,a.map]);return(0,n.useEffect)((function(){var e,r,n,o;a.map&&(!1===(null===(e=a.map)||void 0===e?void 0:e.cancelled)&&y.current&&null!=a&&null!==(r=a.map)&&void 0!==r&&null!==(n=r.map)&&void 0!==n&&null!==(o=n.getLayer)&&void 0!==o&&o.call(n,b.current)&&(-1===s.indexOf(t.options.type)||-1!==s.indexOf(t.options.type)&&t.options.type===i.current)||v())}),[a.map,t.options,v]),(0,n.useEffect)((function(){var e,r,n,o,i,l;!0!==(null===(e=a.map)||void 0===e?void 0:e.cancelled)&&y.current&&null!==(r=a.map)&&void 0!==r&&null!==(n=r.map)&&void 0!==n&&null!==(o=n.getSource)&&void 0!==o&&o.call(n,b.current)&&(null===(i=a.map.map.getSource(b.current))||void 0===i||null===(l=i.setData)||void 0===l||l.call(i,t.geojson))}),[t.geojson,a.map,t.options.type]),(0,n.useEffect)((function(){var e,r,n,o;if(!0!==(null===(e=a.map)||void 0===e?void 0:e.cancelled)&&a.map&&null!==(r=a.map)&&void 0!==r&&null!==(n=r.map)&&void 0!==n&&null!==(o=n.getLayer)&&void 0!==o&&o.call(n,b.current)&&y.current&&t.options.type===i.current){var l,c=JSON.stringify(t.options.layout);if(t.options.layout&&c!==p.current){var s=JSON.parse(p.current);for(l in t.options.layout){var f;null!==(f=t.options.layout)&&void 0!==f&&f[l]&&t.options.layout[l]!==s[l]&&a.map.map.setLayoutProperty(b.current,l,t.options.layout[l])}p.current=c}var m=JSON.stringify(t.options.paint);if(m!==u.current){var d=JSON.parse(u.current);for(l in t.options.paint){var v;null!==(v=t.options.paint)&&void 0!==v&&v[l]&&t.options.paint[l]!==d[l]&&a.map.map.setPaintProperty(b.current,l,t.options.paint[l])}u.current=m}}}),[t.options,a.map]),(0,n.useEffect)((function(){t.insertBeforeLayer&&a.map&&a.map.getLayer(t.insertBeforeLayer)&&a.map.getLayer(b.current)&&a.map.moveLayer(b.current,t.insertBeforeLayer)}),[a.map,t.insertBeforeLayer]),(0,n.useEffect)((function(){return function(){y.current=!1,a.cleanup()}}),[]),{map:a.map,layer:m,layerId:b.current,componentId:a.componentId,mapHook:a}}p.defaultProps={};const f=p},23166:(t,e,r)=>{r.d(e,{Z:()=>a});var n=r(67294),o=r(26048);const a=function(){return(0,n.useContext)(o.Z)}},31805:(t,e,r)=>{r.d(e,{Z:()=>a});var n=r(67294),o=r(31072);const a=function(t){var e=(0,o.Z)({mapId:t.mapId});return(0,n.useEffect)((function(){if(e.map&&t.layerId&&t.filter&&e.map.map.getLayer(t.layerId)){var r=t.layerId;return e.map.map.setFilter(r,t.filter),function(){e.map&&e.map.map.setFilter(r,null)}}}),[t,e.map]),{}}},77062:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(67294),o=r(31072),a=r(24613),i=function(t){var e=(0,o.Z)({mapId:t.mapId,waitForLayer:t.layerId}),r=(0,n.useRef)(new a.Popup({closeButton:!1,closeOnClick:!0}));return(0,n.useEffect)((function(){e.map&&t.layerId&&e.map.on("mouseenter",t.layerId,(function(n){var o,a;if(e.map){var i=null==n||null===(o=n.features)||void 0===o?void 0:o[0].geometry.coordinates.slice(),l="";if(null!=n&&null!==(a=n.features)&&void 0!==a&&a[0]&&"function"==typeof t.getPopupContent&&(l=t.getPopupContent(n.features[0])),null!=i&&i[0]){for(;Math.abs(n.lngLat.lng-i[0])>180;)i[0]+=n.lngLat.lng>i[0]?360:-360;r.current.setLngLat(i).setHTML(l).addTo(e.map.map)}}}),e.componentId)}),[e.map]),n.createElement(n.Fragment,null)};i.defaultProps={mapId:void 0};const l=i;try{i.displayName="useLayerHoverPopup",i.__docgenInfo={description:"useLayerHoverPopup hook registers a mouseenter event to display feature properties in a MapLibre popup if a feature on the configured layer is hovered",displayName:"useLayerHoverPopup",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of an existing layer in the mapLibre instance this event will be registered to",name:"layerId",required:!1,type:{name:"string | undefined"}},getPopupContent:{defaultValue:null,description:"",name:"getPopupContent",required:!0,type:{name:"(feature: GeoJSONFeature) => string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useLayerHoverPopup/useLayerHoverPopup.tsx#useLayerHoverPopup"]={docgenInfo:i.__docgenInfo,name:"useLayerHoverPopup",path:"src/hooks/useLayerHoverPopup/useLayerHoverPopup.tsx#useLayerHoverPopup"})}catch(t){}},31072:(t,e,r)=>{r.d(e,{Z:()=>c});var n=r(67294),o=r(28721),a=r(74736),i=r(90686);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const c=function(t){var e=(0,n.useContext)(a.Z),r=l((0,n.useState)(),2),u=r[0],c=r[1],s=(0,i.Z)({mapId:null==t?void 0:t.mapId,watch:{viewport:!1,layers:!(null==t||!t.waitForLayer),sources:!1},filter:{includeBaseLayers:!0}}),p=(0,n.useRef)(),f=(0,n.useRef)((0,o.Z)()),m=l((0,n.useState)(!1),2),d=m[0],y=m[1],b=function(){p.current&&p.current.cleanup(f.current)};return(0,n.useEffect)((function(){return function(){b(),y(!1),p.current=void 0}}),[]),(0,n.useEffect)((function(){if(p.current&&!0===p.current.cancelled&&(p.current=void 0,c(void 0),y(!1)),!p.current&&e.mapExists(null==t?void 0:t.mapId)){if(null!=t&&t.waitForLayer){var r,n=!1;if(null==s||null===(r=s.layers)||void 0===r||r.forEach((function(e){e.id===(null==t?void 0:t.waitForLayer)&&(n=!0)})),!n)return}p.current=e.getMap(null==t?void 0:t.mapId),c(p.current),y(!0)}}),[e.mapIds,s.layers,e,t]),{map:u,mapIsReady:d,componentId:f.current,layers:s.layers,cleanup:b}}},90686:(t,e,r)=>{r.d(e,{Z:()=>p});var n=r(67294),o=r(45697),a=r.n(o),i=r(28721),l=r(74736);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){var e=(0,n.useContext)(l.Z),r=(0,n.useRef)(!1),o=(0,n.useRef)(),a=u((0,n.useState)(),2),c=a[0],s=a[1],p=(0,n.useRef)(void 0),f=u((0,n.useState)([]),2),m=f[0],d=f[1],y=(0,n.useRef)(),b=(0,n.useRef)((0,i.Z)()),v=(0,n.useCallback)((function(e){var r,n;return!(!(null!=t&&null!==(r=t.filter)&&void 0!==r&&r.includeBaseLayers||null==e)&&e.baseLayer)&&(void 0===(null===(n=t.filter)||void 0===n?void 0:n.matchLayerIds)||(t.filter.matchLayerIds instanceof RegExp?t.filter.matchLayerIds.test(e.id):e.id.includes(t.filter.matchLayerIds)))}),[t.filter]),g=(0,n.useCallback)((function(){if(o.current){var t=o.current.wrapper.layerState.filter(v),e=JSON.stringify(t);y.current!==e&&(y.current=e,d(t))}}),[v]);return(0,n.useEffect)((function(){var t=b.current;return function(){o.current&&(o.current.cleanup(t),o.current=void 0),r.current=!1}}),[]),(0,n.useEffect)((function(){var n,a,i,l;e.mapExists(t.mapId)&&!r.current&&(r.current=!0,o.current=e.getMap(t.mapId),o.current?(null!=t&&null!==(n=t.watch)&&void 0!==n&&n.viewport&&(s(o.current.wrapper.viewportState),o.current.wrapper.on("viewportchange",(function(){var t,e;p.current!==(null===(t=o.current)||void 0===t?void 0:t.wrapper.viewportStateString)&&s(null===(e=o.current)||void 0===e?void 0:e.wrapper.viewportState)}),b.current)),null!=t&&null!==(a=t.watch)&&void 0!==a&&a.layers&&(g(),o.current.wrapper.on("layerchange",g,{includeBaseLayers:null==t||null===(i=t.filter)||void 0===i?void 0:i.includeBaseLayers,matchLayerIds:null==t||null===(l=t.filter)||void 0===l?void 0:l.matchLayerIds},b.current))):r.current=!1)}),[e.mapIds,e,t.mapId,g,t]),{layers:m,viewport:c}}s.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}},s.propTypes={mapId:a().string,watch:a().shape({layers:a().bool,sources:a().bool,viewport:a().bool}),filter:a().shape({includeBaseLayers:a().bool,matchLayerIds:a().oneOfType([a().string,a().instanceOf(RegExp)]),matchSourceIds:a().oneOfType([a().string,a().instanceOf(RegExp)])})};const p=s},13116:(t,e,r)=>{r.d(e,{Z:()=>s});var n=r(67294),o=r(31072);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const s=function(t){var e,r=(0,o.Z)({mapId:t.mapId}),a=(0,n.useRef)(!1),c=u((0,n.useState)(),2),s=c[0],p=c[1],f=(0,n.useRef)(t.sourceId||(t.idPrefix?t.idPrefix:"Source-")+r.componentId),m=(0,n.useCallback)((function(){var e;r.map&&(a.current=!0,r.map.map.getSource(f.current)&&r.cleanup(),null===(e=r.map)||void 0===e||e.addSource(f.current,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t.source),r.componentId),p(r.map.map.getSource(f.current)))}),[t,r.map]);return(0,n.useEffect)((function(){r.map&&!a.current&&m()}),[r.map,t,m]),(0,n.useEffect)((function(){var e,n,o,i;a.current&&null!==(e=r.map)&&void 0!==e&&null!==(n=e.map)&&void 0!==n&&n.getSource(t.sourceId)&&(null===(o=r.map.map.getSource(t.sourceId))||void 0===o||null===(i=o.setData)||void 0===i||i.call(o,t.source.data))}),[null===(e=t.source)||void 0===e?void 0:e.data]),(0,n.useEffect)((function(){return function(){var t,e,n;if(a.current=!1,r.map&&null!==(t=r.map)&&void 0!==t&&null!==(e=t.map)&&void 0!==e&&null!==(n=e.style)&&void 0!==n&&n._layers){for(var o=0,i=Object.entries(r.map.map.style._layers);o<i.length;o++){var l=u(i[o],2),c=l[0];l[1].source===f.current&&r.map.map.removeLayer(c)}r.map.map.removeSource(f.current)}}}),[r.map]),{map:r.map,source:s,componentId:r.componentId,mapHook:r}}},25969:(t,e,r)=>{r.d(e,{Z:()=>f});var n=r(67294),o=r(59542);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t){var e=c((0,n.useState)(),2),r=e[0],a=e[1],i=c((0,n.useState)(t.url),2),u=i[0],s=i[1],p=c((0,n.useState)(""),2),f=p[0],m=p[1],d=c((0,n.useState)(),2),y=d[0],b=d[1],v=c((0,n.useState)(),2),g=v[0],h=v[1],S=function(){a(void 0),b(void 0),m("")};return(0,n.useEffect)((function(){var e;if(S(),h(void 0),u){var r,n=u;-1!==u.indexOf("?")&&(n=(r=u.split("?"))[0]);var a=new URLSearchParams(null===(e=r)||void 0===e?void 0:e[1]),i=l(l({},Object.fromEntries(a)),t.urlParameters),c=new URLSearchParams(i),s=decodeURIComponent(c.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(n+"?"+s).then((function(t){if(t.ok)return t.text();throw Error(t.statusText+" ("+t.status+" - "+t.type+")")})).then((function(t){b(new o.Z(t,window.DOMParser).toJSON())})).catch((function(t){S(),console.log(t),h(t.message)}))}}),[u,t.urlParameters]),(0,n.useEffect)((function(){var t,e,r,n,o,i,l,u,c,s,p,f,d,b;null!=y&&y.Service&&(m(null===(t=y.Capability)||void 0===t||null===(e=t.Request)||void 0===e||null===(r=e.GetMap)||void 0===r||null===(n=r.DCPType)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.HTTP)||void 0===i||null===(l=i.Get)||void 0===l?void 0:l.OnlineResource),a(null===(u=y.Capability)||void 0===u||null===(c=u.Request)||void 0===c||null===(s=c.GetFeatureInfo)||void 0===s||null===(p=s.DCPType)||void 0===p||null===(f=p[0])||void 0===f||null===(d=f.HTTP)||void 0===d||null===(b=d.Get)||void 0===b?void 0:b.OnlineResource))}),[y]),{capabilities:y,getFeatureInfoUrl:r,wmsUrl:f,error:g,setUrl:s}}p.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"}};const f=p},49004:(t,e,r)=>{r.d(e,{vm:()=>o.Z,tw:()=>n.t,X$:()=>n.Z,bQ:()=>a.Z}),r(7491),r(83730),r(74582),r(11624),r(29093),r(28883),r(70769),r(50228),r(74297),r(93482),r(61488),r(30426),r(76956),r(18399),r(89798),r(74168),r(16804),r(6546),r(58725),r(50850),r(9277),r(87779),r(72741),r(78245),r(71332),r(26109),r(56357),r(46871),r(21624),r(32714),r(16439),r(18128),r(74767),r(48703),r(66639),r(19573),r(77393),r(51834),r(46846),r(76273),r(43954),r(31805),r(77062),r(86841),r(67294),r(90686),r(31072);Object.keys({mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}),r(13116),r(25969),r(81919),r(23166),r(52122),r(14573);var n=r(74736),o=(r(15668),r(74054),r(26048),r(26778),r(79485),r(44598),r(94939),r(83658),r(68798),r(82651)),a=(r(13356),r(26299),r(77602),r(60136),r(4305),r(67704),r(18434),r(17781),r(39307),r(22305),r(28567),r(53747),r(52404),r(22281),r(53426),r(54852));r(59523),r(93826)}}]);